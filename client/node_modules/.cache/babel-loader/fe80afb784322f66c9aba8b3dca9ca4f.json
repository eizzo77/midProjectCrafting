{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\EiZzO\\\\Documents\\\\Bootcamp Exercises\\\\React\\\\MidProj\\\\client\\\\src\\\\components\\\\WorldPage.components.jsx\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useRef, useState, useMemo, createRef } from \"react\";\nimport { MaterialsData } from \"../Data/Materials\";\nimport axios from \"axios\";\nimport CollectEffect from \"../sounds/collect.mp3\";\nimport \"./WorldPage.components.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst endPoint = \"http://localhost:5555\";\nconst MaterialsLength = 8;\nlet currentID = 1;\nexport const WorldPage = ({\n  character,\n  setCharacter\n}) => {\n  _s();\n\n  const [materials, setMaterials] = useState([]);\n  const worldref = useRef();\n  const [collectAudio, setCollectAudio] = useState(new Audio(CollectEffect));\n  const [fadeOut, setFadeOut] = useState(\"fade-out\");\n  useEffect(() => {\n    setTimeout(() => {\n      setFadeOut(\"\");\n    }, 3000);\n  }, []);\n  useEffect(() => {\n    const toId = setTimeout(() => {\n      if (materials.length < MaterialsLength) {\n        const materialData = MaterialsData[Math.floor(Math.random() * MaterialsData.length)];\n        materialData[\"amount\"] = Math.floor(Math.random() * 5) + 1;\n        setMaterials([...materials, {\n          id: currentID,\n          top: Math.floor(Math.random() * worldref.current.clientHeight - 50) + 40,\n          left: Math.floor(Math.random() * worldref.current.clientWidth - 50) + 30,\n          materialData\n        }]);\n        currentID++;\n      }\n    }, 3000);\n    return () => {\n      clearTimeout(toId);\n    };\n  }, [materials]);\n\n  const onMaterialClick = async (material, e) => {\n    collectAudio.play();\n    e.currentTarget.classList.add(\"swirl-out-bck\");\n    const {\n      materialData\n    } = materials.find(m => m.id === material.id);\n    const addMaterial = character.materials[materialData.type] ? { ...materialData,\n      amount: character.materials[materialData.type].amount + materialData.amount\n    } : { ...materialData\n    };\n    const upgChar = await axios.put(\"https://605cf2c16d85de00170db556.mockapi.io/Character/1\", { ...character,\n      materials: { ...character.materials,\n        [materialData.type]: addMaterial\n      }\n    });\n    setCharacter(upgChar.data);\n\n    const _materials = materials.filter(m => m.id !== material.id);\n\n    setMaterials(_materials);\n  };\n\n  const renderedMaterials = () => {\n    return materials.map(material => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: e => onMaterialClick(material, e),\n        className: \"material\",\n        style: {\n          top: material.top,\n          left: material.left,\n          cursor: \"pointer\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: material.materialData.imgURL\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 77\n        }, this)\n      }, material.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 20\n      }, this);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: worldref,\n    className: `world-container ${fadeOut}`,\n    children: [renderedMaterials(), console.log(character)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n\n_s(WorldPage, \"Mxd23f1Mug8JALZzvLOuQgxNi2Y=\");\n\n_c = WorldPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"WorldPage\");","map":{"version":3,"sources":["C:/Users/EiZzO/Documents/Bootcamp Exercises/React/MidProj/client/src/components/WorldPage.components.jsx"],"names":["React","useEffect","useRef","useState","useMemo","createRef","MaterialsData","axios","CollectEffect","endPoint","MaterialsLength","currentID","WorldPage","character","setCharacter","materials","setMaterials","worldref","collectAudio","setCollectAudio","Audio","fadeOut","setFadeOut","setTimeout","toId","length","materialData","Math","floor","random","id","top","current","clientHeight","left","clientWidth","clearTimeout","onMaterialClick","material","e","play","currentTarget","classList","add","find","m","addMaterial","type","amount","upgChar","put","data","_materials","filter","renderedMaterials","map","cursor","imgURL","console","log"],"mappings":"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","sourcesContent":["import {React,useEffect,useRef,useState, useMemo, createRef} from \"react\";\r\nimport {MaterialsData} from \"../Data/Materials\";\r\nimport axios from \"axios\";\r\nimport CollectEffect from \"../sounds/collect.mp3\";\r\nimport \"./WorldPage.components.css\";\r\n\r\nconst endPoint = \"http://localhost:5555\";\r\nconst MaterialsLength = 8;\r\nlet currentID = 1;\r\n\r\nexport const WorldPage = ({character,setCharacter}) => {\r\n    const [materials,setMaterials] = useState([]);\r\n    const worldref = useRef()\r\n    const [collectAudio,setCollectAudio] = useState(new Audio(CollectEffect));\r\n    const [fadeOut,setFadeOut] = useState(\"fade-out\");\r\n\r\n    useEffect( ()=> {\r\n        setTimeout(() => {\r\n            setFadeOut(\"\"); \r\n        },3000); \r\n    },[])\r\n\r\n    useEffect( ()=> {\r\n        const toId = setTimeout(()=> {\r\n        if (materials.length < MaterialsLength) {\r\n            const materialData = MaterialsData[Math.floor(Math.random() * MaterialsData.length)];\r\n            materialData[\"amount\"] = Math.floor(Math.random() * 5) + 1;\r\n            setMaterials([...materials,{id:currentID,top:Math.floor(Math.random() * worldref.current.clientHeight - 50) + 40,\r\n            left:Math.floor(Math.random() * worldref.current.clientWidth - 50) + 30,materialData}]);\r\n            currentID++;\r\n        }},3000)\r\n        return ()=> {\r\n            clearTimeout(toId);\r\n        }\r\n    }\r\n    ,[materials])\r\n\r\n\r\n    const onMaterialClick = async (material,e) => {\r\n        collectAudio.play();\r\n        e.currentTarget.classList.add(\"swirl-out-bck\");\r\n        const {materialData} = materials.find(m => m.id === material.id);\r\n        const addMaterial = character.materials[materialData.type] ? \r\n        {...materialData, amount:character.materials[materialData.type].amount + materialData.amount} : {...materialData};\r\n        const upgChar = await axios.put(\"https://605cf2c16d85de00170db556.mockapi.io/Character/1\",{...character, materials: {...character.materials,[materialData.type]: addMaterial}});\r\n        setCharacter(upgChar.data);\r\n        const _materials = materials.filter(m => m.id !== material.id);\r\n        setMaterials(_materials);\r\n    }\r\n\r\n    const renderedMaterials = () => {\r\n        return materials.map((material) => {\r\n            return <div key={material.id} onClick={(e) => onMaterialClick(material,e)} className=\"material\" \r\n            style={{top:material.top,left:material.left, cursor:\"pointer\"}}><img src={material.materialData.imgURL}/></div>\r\n        })\r\n    }\r\n    \r\n    return(\r\n        <div ref={worldref} className={`world-container ${fadeOut}`}>\r\n            {renderedMaterials()}\r\n            {console.log(character)}\r\n\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}